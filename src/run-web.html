<!doctype html><html><head><meta charset="utf8"><title>uw8-run</title><style>html,body,canvas{background-color:#202024;margin:0;padding:0}html{height:100%}body{height:100%;grid-template-rows:1fr;display:grid}#screen{image-rendering:pixelated;border:4px solid #303040;place-self:center}#message{width:calc(100% - 16px);color:#c64;z-index:2;background-color:#0006;padding:8px;font:700 12pt sans-serif;position:absolute}@media (min-width:648px) and (min-height:488px){#screen{width:640px;height:480px}}@media (min-width:968px) and (min-height:728px){#screen{width:960px;height:720px}}</style></head><body> <canvas id="screen" width="320" height="240" tabindex="1"> </canvas> <div id="message"></div> </body><script type="module">function e(e){return e&&e.__esModule?e.default:e}class t extends AudioWorkletNode{constructor(e){super(e,"apu",{outputChannelCount:[2]})}}let A=(...e)=>new Uint8Array(...e),a=(...e)=>new Uint32Array(...e);let B=function(B,s={}){s.setMessage||(s.setMessage=(e,t)=>{t&&console.log("error: "+t)});let r,o,n,i,l,d,F,D,f=B.getContext("2d"),u=f.createImageData(320,240),c=s.devkitMode,w=0,g=null==s.keyboardElement?B:s.keyboardElement;if(g){let e=e=>{let t,A="keydown"==e.type;switch(e.code){case"ArrowUp":t=1;break;case"ArrowDown":t=2;break;case"ArrowLeft":t=4;break;case"ArrowRight":t=8;break;case"KeyZ":t=16;break;case"KeyX":t=32;break;case"KeyA":t=64;break;case"KeyS":t=128;break;case"KeyR":A&&m(o,!0);break;case"F9":A&&B.toBlob((e=>{C(e,".png")})),e.preventDefault();break;case"F10":A&&function(){if(l)return l.stop(),l=null,F.disconnect(D),F=null,void(D=null);let e=B.captureStream();D=n.createMediaStreamDestination(),F=i,i.connect(D),e.addTrack(D.stream.getAudioTracks()[0]),l=new MediaRecorder(e,{mimeType:"video/webm",videoBitsPerSecond:25e6});let t=[];l.ondataavailable=e=>{t.push(e.data)};let A=s.timerElement;A&&(A.hidden=!1,A.innerText="00:00");function a(){if(d){if(A){let e=Math.floor((Date.now()-d)/1e3);A.innerText=Math.floor(e/60).toString().padStart(2,"0")+":"+(e%60).toString().padStart(2,"0")}setTimeout(a,1e3)}}l.onstop=()=>{A&&(A.hidden=!0),C(new Blob(t,{type:"video/webm"}),".webm")},l.start(),d=Date.now(),setTimeout(a,1e3)}(),e.preventDefault()}A?w|=t:w&=~t};g.onkeydown=e,g.onkeyup=e}async function m(l,d){r&&(r(),r=null),n=new AudioContext({sampleRate:44100});let F=!0,D=new AbortController;r=()=>{n.close(),F=!1,D.abort()};let g=l.byteLength;if(s.setMessage(g),0==g)return;await n.audioWorklet.addModule(e("data:application/javascript,let%20e%3D%28...e%29%3D%3Enew%20Uint8Array%28...e%29%3Bclass%20t%20extends%20AudioWorkletProcessor%7Bconstructor%28%29%7Bsuper%28%29%2Cthis.sampleIndex%3D0%2Cthis.port.onmessage%3Dt%3D%3E%7Bthis.memory%3FisNaN%28t.data%29%3Fe%28this.memory.buffer%2C80%2C32%29.set%28e%28t.data%29%29%3Athis.startTime%3Dt.data%3Athis.load%28t.data%5B0%5D%2Ct.data%5B1%5D%29%7D%7Dasync%20load%28e%2Ct%29%7Blet%20s%3Dnew%20WebAssembly.Memory%28%7Binitial%3A4%2Cmaximum%3A4%7D%29%2Ca%3D%7Benv%3A%7Bmemory%3As%7D%7D%3Bfor%28let%20e%20of%5B%22acos%22%2C%22asin%22%2C%22atan%22%2C%22atan2%22%2C%22cos%22%2C%22exp%22%2C%22log%22%2C%22sin%22%2C%22tan%22%2C%22pow%22%5D%29a.env%5Be%5D%3DMath%5Be%5D%3Bfor%28let%20e%3D9%3Be%3C64%3B%2B%2Be%29a.env%5B%22reserved%22%2Be%5D%3D%28%29%3D%3E%7B%7D%3Bfor%28let%20e%3D0%3Be%3C16%3B%2B%2Be%29a.env%5B%22g_reserved%22%2Be%5D%3D0%3Blet%20r%3Dasync%20e%3D%3E%28await%20WebAssembly.instantiate%28e%2Ca%29%29.instance%2Ci%3Dawait%20r%28e%29%3Bfor%28let%20e%20in%20i.exports%29a.env%5Be%5D%3Di.exports%5Be%5D%3Blet%20n%3Dawait%20r%28t%29%3Bthis.memory%3Ds%2Cthis.snd%3Dn.exports.snd%7C%7Ci.exports.gesSnd%2Cthis.port.postMessage%282%29%7Dprocess%28e%2Ct%2Cs%29%7Bif%28this.snd%26%26this.startTime%29%7Bnew%20Uint32Array%28this.memory.buffer%29%5B16%5D%3DDate.now%28%29-this.startTime%3Blet%20e%3Dt%5B0%5D%2Cs%3Dthis.sampleIndex%2Ca%3De%5B0%5D.length%3Bfor%28let%20t%3D0%3Bt%3Ca%3B%2B%2Bt%29e%5B0%5D%5Bt%5D%3Dthis.snd%28s%2B%2B%29%2Ce%5B1%5D%5Bt%5D%3Dthis.snd%28s%2B%2B%29%3Bthis.sampleIndex%3D4294967295%26s%7Dreturn%210%7D%7DregisterProcessor%28%22apu%22%2Ct%29%3B")),i=new t(n);let C,Q=0,y=new Promise((e=>C=e)),E=e=>{Q|=e,3==Q&&C&&(C(!0),C=null)},I=()=>{"suspended"==n.state?(s.startButton&&(s.startButton.style="",B.style="display:none"),(s.startButton||B).onclick=()=>{n.resume()}):(s.startButton&&(s.startButton.style="display:none",B.style=""),E(1))};n.onstatechange=I,I(),o=l;let b=window.location.pathname;if(g<=1024&&!d){let e="";for(let t of A(l))e+=String.fromCharCode(t);b+="#"+btoa(e),b!=window.location.pathname+window.location.hash&&history.pushState(null,null,b)}B.width=B.width;try{let t={initial:4};c||(t.maximum=4);let B,r=new WebAssembly.Memory(t),d=A(r.buffer),C={env:{memory:r}},Q=e=>{if(B&&(!c||0!=A(e)[0])){d.set(A(e));let t=B.exports.load_uw8(e.byteLength);e=new ArrayBuffer(t),A(e).set(d.slice(0,t))}return e},I=async e=>(await WebAssembly.instantiate(e,C)).instance,b=async e=>Q(await(await fetch(e)).arrayBuffer());B=await I(await b(e("data:application/wasm;base64,AGFzbQEAAAABFQRgAX8Bf2ACf38Bf2ADf39%2FAGAAAAIPAQNlbnYGbWVtb3J5AgAEAwkIAAABAgEAAAMGEAN%2FAUEAC38BQQALfwFBAAsHGQIIbG9hZF91dzgAAAp1bmNvbXByZXNzAAQIAQcKngUIxwEBB39BAC0AAEEBayIBQQBIBEAgAA8LQYDAByAAaiECIAFBAXEEQEEBQYHABxAEIQIFQYDAB0EAIAAQAwtBAEGAhA9BCBADQYiEDyEDQQghBEGBwAchBQNAIAUgAkggAyMATiAFLQAAIAMtAABMcnEEQCAEIAQgBRACIgZqIQQgAyMASCAFLQAAIAMtAABGcQRAIAMgAxABaiEDCyAFIAZqIQUMAQsgAyMASARAIAQgBCADEAIiB2ohBCADIAdqIQMMAQsLIAQLPAEEfyAAIQEDQCACIAFBAWoiAS0AACIEQf8AcSADdHIhAiADQQdqIQMgBEEHdQ0ACyABQQFqIABrIAJqCxIBAX8gACABIAEQASICEAMgAgskAANAIAJBAEoEQCAAIAJBAWsiAmogASACai0AADoAAAwBCwsLqQEBBn8gACQBQQAkAgNAIANBgAE6AICADyADQQFqIgNBgQNIDQALAkADQEEAEAYiBQRAIAQEf0EBBUGAAhAGCwRAQYECEAVBAWsiAkUNAwtBwQIQBSEGA0AgASABIAJrLQAAOgAAIAFBAWohASAGQQFrIgYNAAsFQQEhBwNAIAdBAXQgBxAGciIHQYACSA0ACyABIAc6AAAgAUEBaiEBCyAFIQQMAAsLIAELNAECfwNAIAAgAmoQBgRAIAEgACACakEgahAGIAJ0ciEBIAJBAWohAgwBCwsgAUEBIAJ0cgtxAQR%2FA0AjAkGAIEgEQCMCQQh0IwEtAAByJAIjAUEBaiQBDAELCyMCQf8BcSICIAAtAICADyIBIwJBCHUiA2xBgAIgAWsgA2wgAWsgAiABSCIEG2okAiAAIAFBByAEQYECbGogAWtBBHVqOgCAgA8gBAsMAEEAQYCEDxAEJAALC98DAQBBAAvYA5efz3FZ0f5yFbUvithc%2FqHFfzojM7KVsEv7fSGG57W3091tBMQ3YrNZU2%2FjguFMMLW1a4URR2fHh86SJQlSzejWWM32zngHHWdNsU4kGrhmGgxUZIRAb6JLtW%2BQyuXIBssNN5IEWkb%2BrOGf8rSLasDdCc83RsuuCyL03791uwlwi0T8mJR%2BslH82ckKlC5TK6wnPyoB908kSeLY%2BEhunDhtWHA7EWwwdQvigYMhTQ6Cyi%2BXelkSq6CnCQnZrAqXrvEsSe7%2BYNt3Hg0MFycXedDIoFANBDyfPayKr1EeSiF%2FV%2F15gTYFDzZW11RK%2B8G36tFDe%2F0eS8UvRLzmz1%2BECmaHQy5Frnorhi3MJqKOrte8TbMZuNPBYJ2xxYJYAfb%2Fgv0WEsQcjrHzbYTdl%2FssybvXkXL5kX9wqIbmjfuuuWKQ5%2FKpFH8CVERpjQgbzuManrAJEwr9sqV4%2FshQkQfL84qfsILfEsCx%2FdaZxj1wCtbS9ooFIuU%2FeAVS6vj4%2F84MOrrGpzpn4n%2BPJbyQjmN1MWq8%2Bfa4JXif0gmICDJhvYf7gn4ki%2B5iAeDiO6yRuZ7QVL%2BXDeNX5w3VGjuJICdg%2FM0c6GQo39rUrMsdajtL0uVRQmeH33z5%2B%2Fo%3D")));for(let e of["acos","asin","atan","atan2","cos","exp","log","sin","tan","pow"])C.env[e]=Math[e];for(let e=9;e<64;++e)C.env["reserved"+e]=()=>{};for(let e=0;e<16;++e)C.env["g_reserved"+e]=0;l=Q(l);let p=await b(e("data:;base64,AivfncPcObrH0dq3AlPISmKAaP%2BzxT0W83uq3jpWiIkM4nwVP4o6lFc6P8Jd0Z00%2BYgURTJF%2Fstws1xD5SOiNzt0pxcZ7mOIqQJSPbU%2Bp46gW2d6vxm1XJbAQxZjBr0%2FTKu8bBkuOYMq74t6powHDa0i97cXtBFM72f6TGxOKi%2BRQjyVJ2mCSDamBUsqGES3kfKzK%2F2saAqBFBLZm2VYOtNAYmho21e74yuQGOdfm8iISAWpTPz2Kdl5r2ZOB848S0h8OIIwcku22xz%2FRFwE0A81wa0fuYFdzOHJ0kIP5reroGsyrWAcfuDn4nXS5Uz0Ib9CGpk5uFwpRvgrCNCu9Fw8HqzqRhlkZ4CrgeNX9r9op%2FBr9PjhJgDTw%2Bez4F1P2AoRQpwaD410FNfQ2ps%2BeF7HVVuFDUr1LdLIv21NorGP8fnqO8xVhimkZwx5BGdhlVmbAvNpj2y68%2FT%2F8rXFKnOT9SbYhy%2F%2Fc%2B%2Bg89UgSBDKjgoRF%2BwtJ4j0yHDpqPzOcOr0SokDvONI69RA2%2BCdKuSgynxy9ofhYkTObFRbOD8yJLc5TOjz8ympqIXQaIIdZ9FBL29Zlw0k5obV8gm0eaoDXm54P4nuHH6pKM2DjchSc85SLj3CdtPFF9C6K5B%2B88O8HluDyBTVW%2Bdw3c%2BRblTB%2Fp%2BcYJThDans3VCF0vW05RjA2z9BUpvQ57gAviZ9rh%2BzCTEdPAlLwPqGRL%2BfZRTtc%2B0cUX95LBxNq4WDF7GuJ0y5EzDJjQ1Oxj1jGYILnBeD0vAp4ofHf9HxfA2JXOrGCXAK1CgecphwuxDg6BF0dK3XGoxbJUJ7qQ4Esq7PeOkH9ZRcRTQwBUG9GDB6uubxfHBGaOli9N0sRyEE7LUx4HHW5sznfOUG1t8a7u81c2ekZieRC4rU59Kl%2FtEPJ%2BJbjsdVAtjK4Q31WZpzTqOpnXtN0Kd1eaVmOOudaKmvMAVzdupU3e8xFNNJfXND%2B6mixN0O8BreKbeZkKrTNcDTqL9di02LS9qQsPO6KuvVdD19CGjdGJRKhhqhSaH%2B6JKrp82ZkgEDLBPNzelb5nqoZZ2vaLxwuIjyzGj1HXc%2BAG5O8odjrauoivUGUn%2BULh4i9LqYVv5RsaZBf3FwlnmiCYKKYkF9D6QBOKD4arvnJYnKHy%2FI8z6Z%2Bq8SiLQeG5RLAJ7d9b1eO%2BlX5mSVPLS0zJM2BQmmzW4nfDQVWfiKwe2gMa37X2ilYat0FAPP0Zp6fbk0Gyv4pDRv05p2JtBpTaIMt22LGd3zRPaGxyarwi%2FMeLf%2FHn%2FVZz4sQRErllmg5MYXulC65ozQV8yKaKIgeXiDKK0OQQAu7jjq2vvP4bqB7LEVgX4HmXIke7ZpIChyO7Bk%2FhsI5dGfVjZxg5akTKVv2%2BSOxQxJiY1iqRqrxCmmPKL2r8GvHQhS604Su4xmTYydB%2B%2BTVsClHz58fXLZMAIjV5uLLxrcFd7yA6ZEfR6vGMJvyHI8Y9YdaS2BWFe1biRjrrKBsNSwPc5ok2FilQY76HvzHW9C7docl4F8KODxJz2CtClWxj3mvXrZPxSZnFlwqZH7mGONd6mJxoIoAHnd31RlTgOGR6btY4lo7IaIpZo2mRyUP9Xu0%2B3jLLEWJEYlUSOqKA585V0uFNsiueAnkMwkjUhFFCMuLMtc3L3sVv9XVVNBm8ze7uXCzx8v0dllurjXNwdYHwYQhIZqGc0Jke2dDhd9bp35dAhm9FvO6iScsBeODE5J8fAf0WR2V3PFDofCUPUIlalbe%2F4YYnh2yFGthelq9y9%2BixEPriN22dYKMHINOzj0J76v4xEHr19R3%2BNQCrgJU8HAh46VXMF7N%2F2xmwHR0Dh%2FkK31xzvvUu5MKsH11vPWWs%2B8KfuAEKd3wOc3JKUnhNLMJTge%2FW18monqQwps6yNYvoatbFPUbEYsRZL956M3kNRRUzirxkqh6U7aAj6FY%2BMkLf2vHVabfnA2PBMsVi3AOirFRUPnwSbIYI9y3CN%2Fh5ZxQ5tmksmdmcEJ5jnrljh24G%2BjQM5Z9J9%2FmzXq6d8bzKd4OD%2FX330BkJLNNmdcvJgE8uwHvx84ZUdeZ%2Bp6yiSyPQ0anwKRYfYIqx4zvyg3a1ot4FwmCW2Az2%2By9HCv2BW5mxYv%2BLsix%2FdZcRhEZkH4to21JLbxSSGdTqi8yVGg7IzIssACYCBlPu94YawBROfM7t5DPv9fzYByjuTZDfHaOomI4nPmzhYsDmawqLghwOsfvzrlKSS2E8B3Prsb7DOcH0HCZ4PLmBm%2BZd8ZdcjAfBYfD3UtcqdyB8j6IpKQjranbEqz7oFmjRNu1DL8lJmHOCjkVOtDT0WFzDQYaLjbyaW7oKBb%2BKIwId39GGfDSe2gsulWZUTc8bHXPVJhBFdD8bVJBYjutHplxwmWFd9wfsriGUj%2BEaJCOJoGtyv8phqD7Fl731VoZiG7wjDSXtPsPwvXoaZRNkKPdLTKqGxc8QQh783JRIVt%2Ffj%2BwBqFrFFpOmEWlNrn5UFQZDt6njvwtuhooMqe%2BrRICa8kH1pILXJkHHaLnNlVxRthLPvtZ%2BVbbGDO7ncKIZoojG%2FwbKbNQFIOHbdxKjf34%2B%2F9g9l64b2BcXqEhVbHrpyhQEP6s6vre3wGRYIlkcURDd%2BnDJVsYod%2F%2FtrbR%2BXOsJ5CfxZigLVV77Cq2FdmR1KJk8MYydScwrLgppcXONRvdcw7Jo1G8HgMfF6zmbgEkHzfDfiYAzfAasJVo0nzALzbnxctHcvVW7SmtSh7axVZbNEJSDljFmrgZMoZHKJqyJeSrrjOvmoX4Xv%2FpCzwDejQmtELObol%2BqRnN64DFZBGMa4CGP%2Bx%2BxZyZEbguV%2BrjRlLa0d6jDG9opRCG4zu6qWz2hmy9AsxAyFvDvEJsSy0c3rVAhCqKZvSAYyvUO7XtyoVanznr6fHXskZuVAzQqTtpwp2wh0GCfiKkHk87W9DC8f1ymeEiQhOjlXR1CWtGkH%2BpaqXOj54CWywuBziwfQY6wLuqbCLgAFyVN%2B3skm5%2BmjfYVmfcHAcddxNEG8%2B3i2eSCp%2FVb9xyZVQRSbN5QMmTfH677KVXEsnQCmR3XSKwbkDi%2BFnWF7EgnKNhDSRf4NB5A34mDeHZXly7GpgcKS1o6i5%2B87IhJkFPz9jN8abA95prlGUZE4wft7kTQo8TX8Oj3o%2FLdZZW4NCuJD0EDnA9VlmD06neYKwd47IYospbPKwGEXyAvubm1St4NcsYhB0xA5Eg41fh6gw58UJRbfN%2FipaJAajWhpvj0dLrVfNarrgD5rbhVzIIoURLf9uf6xM8UGKiqeFavIJPlXYsRrLR38PEax84deykHAwLglOfodh7N0CtlAREza9X4917GEaUu8aiAWqkJ9bt0w%2FmgcVqZwJ%2Fb5AEfK%2Be6OU4wMaP3ptCncJjHraBWRrDHiZ%2BODWaKBkp2qz4jz66r2F8biN4Mvf8mB36xzBJ%2Fr2KsPbmfgKyqCGEkgoa6am71VXMMtJQVq2DJcMT2EyeK5w6JuN8%2BDRMUJFt%2BkkOfnVIJ02SGuq6WsGzZXS5AvX2JXKxzr34zlegHEUB%2BsS476f8U%2BfU0a2y4ijet5Hj59FxbuEICtJSvzMU6PFDi95PEB7pWH2sHyQD6F6MeP3gdNQjzI9O4ocN0sKlZOvgiMpHqRf0Mce%2BcH83yE4ev9DaXiL0TBZAyNR%2BpbFy2e8Nh0mpI8%2BilPNJO4Qfm%2Fo%2Ffm8kur%2FMzIB6JTfQwKkBoR9j1tR%2BvGXwwBbgAWFzN1z1wJE9pzpc24VFuQBGY%2FHGyLxSoCdiXJazyT3Nb6KTwK1I49ap%2B0TW1Oo4zW6PUH5R%2BheyX3oFIOHD4s5YkqtPPjEH7bo58swfKqa4w%2BeOjDU2Kb7yXXGTwwqMYrAUwivstm1B%2BAP74Y3TciddM2caEFXinx2NCIJeGKEUrk%2FKr%2FdorFCqAjFYbqunWfn20xub%2FUHJK8%2FqM3R%2FdVftY57Dr7SehgkrCVJ%2Bsno7IXu4Gf1KXfklc9RgwBe2nW7Yc9J4%2Bricm%2BS4zFXdrrrWAqF9edSLiBDm9rbmcpm46v64eZbSZaC7BDqAmLTveIgD7T0MgPV%2BG9LqRHDNwjQws4tkLAf7D%2BBRhYuF4o3sojXWOWidkOBSWYyYLOxHhCzxj5qYfPtLixgihY63hAvdwYzFiMtCiFedL7StNt2gDCNdPrp%2BfqJn72m22QGQ5dYhRaBmJcPNdnkdGEIP2DFTnq%2FendRw9LvZ4uRZbNogSo3cZLEEfAR5YGplHGAgJJhH7lXKACljCC2ixfi1VBrS7rcn8WDbSfv6xmsl4OZIu1Wd66B5gABJ69EZQ8L5YjsrXbxb%2FBk5v%2F3OfKbVbruhDD96YlnGW2wXL1w%2BWQRtcwZvK3nTAo7yMu%2BA9jf4eW8HyhGMl8LzN2G0MunNkCK1NQGCljg63xYdcDPw10dGeMQ7f3i0Vy8xTQde3%2F%2FuLPbpzG1w%2FWRGDgivI7OQJFFgT4%2B69xdw3cdMVFfftCQqDupkxh0xORQtiVi6ABS6sFN27Wwdb%2Bj504U7h3hM1T6Nt24u%2BbbGQ4QVoN5vi%2Fyp8zspppU42DxSfPYzaOqwKP7o1%2FU3lP%2FM0oQai4mJ6RSTqdJ2XLzPkbEKy8sM9kmfB8CaQ0CZo5NAmNhC2BI8iXQo%2FDurjTPVcocWa49q6cq0eF5Fd2if7n1eOStb9znsuHEwXaAgynmSbJEeMkTftcqt7pWKWkAo4Es7vU2MxuSNrnijHr%2BjygR8ZPqkN%2FHHRMPZ68Ky2Sv7%2BM8iprskNUryHlHvzK5cL2%2BvkM0iO6E8XkaTgUUCZzo5kWUevrC8psSU4ShiDAlxJYCFsDYgIRSLKjVC5QtxJO6cPIWBqQs9L6o52zPfLmZOScRuJ8FGsudjtUDMITpLb5MMPciqB%2BUgHTu9oPxF23sU%2FKg6kXZO%2B1GT1f3DRZlWdp5zB4Eety%2Fe7CB2ZSQ7muVv8rNqZYoj3DcKoy6v3dp084dqDeraoMrBqKIroZBlcvWRg%3D%3D"));i.port.onmessage=e=>E(e.data),i.port.postMessage([p,l]);let h=await I(p);for(let e in h.exports)C.env[e]=h.exports[e];let M=await I(l),v=a(u.data.buffer);await y;let x=Date.now();const k=1e3/60;let L=x;i.connect(n.destination);let R=!1,J=x,S=e=>{let t=Date.now();e?(R=!1,n.resume(),x+=t-J,i.port.postMessage(x)):(R=!0,n.suspend(),J=t,i.port.postMessage(0))};window.addEventListener("focus",(()=>S(!0)),{signal:D.signal}),window.addEventListener("blur",(()=>S(!1)),{signal:D.signal}),S(document.hasFocus()),function e(){if(F)try{let t=!1;if(!R){let e=navigator.getGamepads(),B=0;for(let A=0;A<4;++A){let a=e[A];if(a){for(let e=0;e<8;++e){let t=(e+12)%16;a.buttons.length>t&&a.buttons[t].pressed&&(B|=1<<8*A+e)}if(a.axes.length>1)for(let e=0;e<4;++e){let t=a.axes[1-(e>>1)];(1&e?t:-t)>.5&&(B|=1<<8*A+e)}a.buttons.length>9&&a.buttons[9].pressed&&(t=!0)}}let s=a(r.buffer);s[16]=Date.now()-x,s[17]=w|B,M.exports.upd&&M.exports.upd(),h.exports.endFrame();let o=new ArrayBuffer(32);A(o).set(A(r.buffer,80,32)),i.port.postMessage(o,[o]);let n=a(r.buffer,77824,1024);for(let e=0;e<76800;++e)v[e]=4278190080|n[d[e+120]];f.putImageData(u,0,0)}let B=Date.now();L=Math.max(L+k,B),t?m(o):window.setTimeout(e,Math.round(L-B))}catch(e){s.setMessage(g,e.toString())}}()}catch(e){s.setMessage(g,e.toString())}}function C(e,t){let A=document.createElement("a");A.href=URL.createObjectURL(e),A.download="microw8_"+(new Date).toISOString()+t,A.click(),URL.revokeObjectURL(A.href)}return{runModule:m,runModuleFromURL:async function(e,t){let A=await fetch(e),a=A.headers.get("Content-Type");return!(a&&a.includes("html")||200!=A.status)&&(m(await A.arrayBuffer(),t||c),!0)},setDevkitMode:e=>c=e}}(document.getElementById("screen"),{setMessage:(e,t)=>{let A=document.getElementById("message");t&&(A.innerText=t),A.hidden=!t}});new EventSource("events").onmessage=e=>{console.log(e.data),"L"==e.data&&B.runModuleFromURL("cart",!0)},B.runModuleFromURL("cart",!0);</script></html>