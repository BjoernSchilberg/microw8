<!doctype html><html><head><meta charset="utf8"><title>uw8-run</title><style>body,canvas,html{background-color:#202024;margin:0;padding:0}body,html{height:100%}body{display:grid;grid-template-rows:1fr}#screen{align-self:center;border:4px solid #303040;image-rendering:pixelated;justify-self:center}#message{background-color:rgba(0,0,0,.4);color:#c64;font:700 12pt sans-serif;padding:8px;position:absolute;width:calc(100% - 16px);z-index:2}@media (min-width:648px) and (min-height:488px){#screen{height:480px;width:640px}}@media (min-width:968px) and (min-height:728px){#screen{height:720px;width:960px}}</style></head><body> <canvas id="screen" width="320" height="240" tabindex="1"> </canvas> <div id="message"></div> </body><script type="module">function e(e){return e&&e.__esModule?e.default:e}class t extends AudioWorkletNode{constructor(e){super(e,"apu",{outputChannelCount:[2]})}}let A=(...e)=>new Uint8Array(...e),a=(...e)=>new Uint32Array(...e);let s=function(s,B={}){B.setMessage||(B.setMessage=(e,t)=>{t&&console.log("error: "+t)});let r,o,n,i,l=s.getContext("2d"),d=l.createImageData(320,240),u=B.devkitMode,F=0,g=null==B.keyboardElement?s:B.keyboardElement;if(g){let e=e=>{let t,A="keydown"==e.type;switch(e.code){case"ArrowUp":t=1;break;case"ArrowDown":t=2;break;case"ArrowLeft":t=4;break;case"ArrowRight":t=8;break;case"KeyZ":t=16;break;case"KeyX":t=32;break;case"KeyA":t=64;break;case"KeyS":t=128;break;case"KeyR":A&&c(o,!0);break;case"F9":A&&s.toBlob((e=>{f(e,".png")})),e.preventDefault();break;case"F10":A&&function(){if(n)return n.stop(),void(n=null);n=new MediaRecorder(s.captureStream(),{mimeType:"video/webm",videoBitsPerSecond:25e6});let e=[];n.ondataavailable=t=>{e.push(t.data)};let t=B.timerElement;t&&(t.hidden=!1,t.innerText="00:00");function A(){if(i){if(t){let e=Math.floor((Date.now()-i)/1e3);t.innerText=Math.floor(e/60).toString().padStart(2,"0")+":"+(e%60).toString().padStart(2,"0")}setTimeout(A,1e3)}}n.onstop=()=>{t&&(t.hidden=!0),f(new Blob(e,{type:"video/webm"}),".webm")},n.start(),i=Date.now(),setTimeout(A,1e3)}(),e.preventDefault()}A?F|=t:F&=~t};g.onkeydown=e,g.onkeyup=e}async function c(n,i){r&&(r(),r=null);let g=new AudioContext({sampleRate:44100}),f=!0,Q=new AbortController;r=()=>{g.close(),f=!1,Q.abort()};let D=n.byteLength;if(B.setMessage(D),0==D)return;await g.audioWorklet.addModule(e("data:application/javascript,let%20e%3D%28...e%29%3D%3Enew%20Uint8Array%28...e%29%3Bclass%20t%20extends%20AudioWorkletProcessor%7Bconstructor%28%29%7Bsuper%28%29%2Cthis.sampleIndex%3D0%2Cthis.port.onmessage%3Dt%3D%3E%7Bif%28this.memory%29if%28isNaN%28t.data%29%29%7Blet%20s%3De%28t.data%29%3Be%28this.memory.buffer%2C80%2C32%29.set%28s%29%2Cs.set%28e%28this.memory.buffer%2C76928%2C32%29%29%2Cthis.port.postMessage%28t.data%29%7Delse%20this.startTime%3Dt.data%3Belse%20this.load%28t.data%5B0%5D%2Ct.data%5B1%5D%29%7D%7Dasync%20load%28e%2Ct%29%7Blet%20s%3Dnew%20WebAssembly.Memory%28%7Binitial%3A4%2Cmaximum%3A4%7D%29%2Ca%3D%7Benv%3A%7Bmemory%3As%7D%7D%3Bfor%28let%20e%20of%5B%22acos%22%2C%22asin%22%2C%22atan%22%2C%22atan2%22%2C%22cos%22%2C%22exp%22%2C%22log%22%2C%22sin%22%2C%22tan%22%2C%22pow%22%5D%29a.env%5Be%5D%3DMath%5Be%5D%3Bfor%28let%20e%3D9%3Be%3C64%3B%2B%2Be%29a.env%5B%22reserved%22%2Be%5D%3D%28%29%3D%3E%7B%7D%3Bfor%28let%20e%3D0%3Be%3C16%3B%2B%2Be%29a.env%5B%22g_reserved%22%2Be%5D%3D0%3Blet%20r%3Dasync%20e%3D%3E%28await%20WebAssembly.instantiate%28e%2Ca%29%29.instance%2Ci%3Dawait%20r%28e%29%3Bfor%28let%20e%20in%20i.exports%29a.env%5Be%5D%3Di.exports%5Be%5D%3Blet%20o%3Dawait%20r%28t%29%3Bthis.memory%3Ds%2Cthis.snd%3Do.exports.snd%7C%7Ci.exports.gesSnd%2Cthis.port.postMessage%282%29%7Dprocess%28e%2Ct%2Cs%29%7Bif%28this.snd%26%26this.startTime%29%7Bnew%20Uint32Array%28this.memory.buffer%29%5B16%5D%3DDate.now%28%29-this.startTime%3Blet%20e%3Dt%5B0%5D%2Cs%3Dthis.sampleIndex%2Ca%3De%5B0%5D.length%3Bfor%28let%20t%3D0%3Bt%3Ca%3B%2B%2Bt%29e%5B0%5D%5Bt%5D%3Dthis.snd%28s%2B%2B%29%2Ce%5B1%5D%5Bt%5D%3Dthis.snd%28s%2B%2B%29%3Bthis.sampleIndex%3D4294967295%26s%7Dreturn%210%7D%7DregisterProcessor%28%22apu%22%2Ct%29%3B"));let w,C=new t(g),E=0,I=new Promise((e=>w=e)),y=e=>{E|=e,3==E&&w&&(w(!0),w=null)},m=()=>{"suspended"==g.state?(B.startButton&&(B.startButton.style="",s.style="display:none"),(B.startButton||s).onclick=()=>{g.resume()}):(B.startButton&&(B.startButton.style="display:none",s.style=""),y(1))};g.onstatechange=m,m(),o=n;let h=window.location.pathname;if(D<=1024&&!i){let e="";for(let t of A(n))e+=String.fromCharCode(t);h+="#"+btoa(e),h!=window.location.pathname+window.location.hash&&history.pushState(null,null,h)}s.width=s.width;try{let t={initial:4};u||(t.maximum=4);let s,r=new WebAssembly.Memory(t),i=A(r.buffer),w={env:{memory:r}},E=e=>{if(s&&(!u||0!=A(e)[0])){i.set(A(e));let t=s.exports.load_uw8(e.byteLength);e=new ArrayBuffer(t),A(e).set(i.slice(0,t))}return e},m=async e=>(await WebAssembly.instantiate(e,w)).instance,h=async e=>E(await(await fetch(e)).arrayBuffer());s=await m(await h(e("data:application/wasm;base64,AGFzbQEAAAABFQRgAX8Bf2ACf38Bf2ADf39%2FAGAAAAIPAQNlbnYGbWVtb3J5AgAEAwkIAAABAgEAAAMGEAN%2FAUEAC38BQQALfwFBAAsHGQIIbG9hZF91dzgAAAp1bmNvbXByZXNzAAQIAQcKngUIxwEBB39BAC0AAEEBayIBQQBIBEAgAA8LQYDAByAAaiECIAFBAXEEQEEBQYHABxAEIQIFQYDAB0EAIAAQAwtBAEGAhA9BCBADQYiEDyEDQQghBEGBwAchBQNAIAUgAkggAyMATiAFLQAAIAMtAABMcnEEQCAEIAQgBRACIgZqIQQgAyMASCAFLQAAIAMtAABGcQRAIAMgAxABaiEDCyAFIAZqIQUMAQsgAyMASARAIAQgBCADEAIiB2ohBCADIAdqIQMMAQsLIAQLPAEEfyAAIQEDQCACIAFBAWoiAS0AACIEQf8AcSADdHIhAiADQQdqIQMgBEEHdQ0ACyABQQFqIABrIAJqCxIBAX8gACABIAEQASICEAMgAgskAANAIAJBAEoEQCAAIAJBAWsiAmogASACai0AADoAAAwBCwsLqQEBBn8gACQBQQAkAgNAIANBgAE6AICADyADQQFqIgNBgQNIDQALAkADQEEAEAYiBQRAIAQEf0EBBUGAAhAGCwRAQYECEAVBAWsiAkUNAwtBwQIQBSEGA0AgASABIAJrLQAAOgAAIAFBAWohASAGQQFrIgYNAAsFQQEhBwNAIAdBAXQgBxAGciIHQYACSA0ACyABIAc6AAAgAUEBaiEBCyAFIQQMAAsLIAELNAECfwNAIAAgAmoQBgRAIAEgACACakEgahAGIAJ0ciEBIAJBAWohAgwBCwsgAUEBIAJ0cgtxAQR%2FA0AjAkGAIEgEQCMCQQh0IwEtAAByJAIjAUEBaiQBDAELCyMCQf8BcSICIAAtAICADyIBIwJBCHUiA2xBgAIgAWsgA2wgAWsgAiABSCIEG2okAiAAIAFBByAEQYECbGogAWtBBHVqOgCAgA8gBAsMAEEAQYCEDxAEJAALC98DAQBBAAvYA5efz3FZ0f5yFbUvithc%2FqHFfzojM7KVsEv7fSGG57W3091tBMQ3YrNZU2%2FjguFMMLW1a4URR2fHh86SJQlSzejWWM32zngHHWdNsU4kGrhmGgxUZIRAb6JLtW%2BQyuXIBssNN5IEWkb%2BrOGf8rSLasDdCc83RsuuCyL03791uwlwi0T8mJR%2BslH82ckKlC5TK6wnPyoB908kSeLY%2BEhunDhtWHA7EWwwdQvigYMhTQ6Cyi%2BXelkSq6CnCQnZrAqXrvEsSe7%2BYNt3Hg0MFycXedDIoFANBDyfPayKr1EeSiF%2FV%2F15gTYFDzZW11RK%2B8G36tFDe%2F0eS8UvRLzmz1%2BECmaHQy5Frnorhi3MJqKOrte8TbMZuNPBYJ2xxYJYAfb%2Fgv0WEsQcjrHzbYTdl%2FssybvXkXL5kX9wqIbmjfuuuWKQ5%2FKpFH8CVERpjQgbzuManrAJEwr9sqV4%2FshQkQfL84qfsILfEsCx%2FdaZxj1wCtbS9ooFIuU%2FeAVS6vj4%2F84MOrrGpzpn4n%2BPJbyQjmN1MWq8%2Bfa4JXif0gmICDJhvYf7gn4ki%2B5iAeDiO6yRuZ7QVL%2BXDeNX5w3VGjuJICdg%2FM0c6GQo39rUrMsdajtL0uVRQmeH33z5%2B%2Fo%3D")));for(let e of["acos","asin","atan","atan2","cos","exp","log","sin","tan","pow"])w.env[e]=Math[e];for(let e=9;e<64;++e)w.env["reserved"+e]=()=>{};for(let e=0;e<16;++e)w.env["g_reserved"+e]=0;n=E(n);let p=await h(e("data:;base64,AgGvo%2FhiWAOEK1gzl%2FEAzyiDVhYPiVBKH23tQ7T2QXVYPLWznIqnQDGR6U%2BFNvmf%2Bss4TBV%2F6eqNbD9rRlzoA4wdP1HS%2FMyw8cOq%2B2rftzWaKaIlONOTbonh5jaRolHHGlf%2BglyBA3ZNk19o56LYbMUeRFW5chNI%2F8kdeqOyiWOTZ8vpu%2BNmdLL1MLISxtXcQ2GMg4tQFukSMbh24rNSxzKdKOPqiWU1%2B7qFIxIQA2CNuFMPmHfrMdmcoTthcEyGiGe1e7rtTIO6r9sflFRXZA9bYMjHHuVAvuREE6eYwY%2F8rzZk2mvQB0GnHHbxgSUac0AoVWoxIV7FftJz5p4GuLkJJrdpGC34gxB%2By4yC%2BcPg7n%2FjWD7z4xHVtM3ytWefxCpm2nc1AjYQjJI934duYcMcypCMes%2FcVPu7vp1l8iXPJ7LX0CR2p%2BCp8wA2j4BXAZ7ZmLSAVr8qnO6pmfRn9lacMdCrYqJtNwLLY99z9UyYs04He6we7K5W%2FtWiIttRoGDL6j7ZRwKPjrGC4PBTQpTTv05e%2Bww8xHOXgGWE4AbjdybR9nQ6iHEzmjuPz2QBSgC3F3Q%2BC55cmxU4i5AP6SZeCTk8X%2F2qOB4s9XqYLo5iwhR6Vyl4VxLS5Ou432vM8mYdSdjpwWEicinZiqOCs%2FdnDik0eGCc59TXSj25NbStBbkkujI1qA4W0OQrVJYc2pZJaPsXJeE58uhH5OK0mxV4lYrWIzVSPZ0rB4kuujQ6vlK%2BbTqKvf5QOxHKC2uo5egnGbWQ6I6UBjNMt%2FMku7AtjDKoDsLjO6TJ0sJMpHJ0jSquru5YzoRETCgEtHOg5BnjqUwuEXpn3ePdv1ArCFQ1EN1T5JlKZS6FMtByLrO3al%2BeG%2BnNzbZ6z5PaIoi0Tx6%2BPSNwcWcogYc7TTfF3GzwG3cWi531zTh2TmXRBk0ZJEBqtqpT5P8uKQ1j5Wl37pEF7V0fcSYbDXpsQgBW1aAsjr27CsOs%2B8kMbGdn%2FuwRBHlNgRmQr2EbgY%2B4bbOt0LfZJrHXdFck6H5FGdsq4dAw2PWFIajroE6361GWd7VPjkSmPgSWxQHoVLuOMXr0na6z9%2BGcUylv3oFs3m6VtyxA6B5%2FM6wR%2BQTZ%2BuQANyvdRdXnkjO5B0jUZPqK%2FkeKMiwzOIjPWHuGBlSRio0VR28eeVS2%2F5agMNa8Spy2Ts6kMjW%2Fg6oP7MmBR64fUZpSDJl4xXG9qxKRWxiFpXEKZkB5YzwOgYyTT0nWNYDE74cJ8Ij7zRUUHY6zTbe6dCLyUmQsutu81M5t43ho8oa9RMAerw2zzif%2BYVf%2BZYb9Q%2Fy%2BJC%2BvwNgZoprUxLrG18Ri%2F84p5PYtPrbEYPINPBIGrkh6hdeiLBaqZ9siLGfhVseQQph%2FVx0Aci0zKEsf48f%2BkDMx1Sye3Xen4koYdrDtP9GdDRT4TWRFpX%2FUNfiJ9t8UqEMNAk9cbjHmJlBwn3h3PkiYXe%2F%2BW6v%2Bq6qVImR4V2GnXVFI1wJmCfsAsRuO12%2BEpomVxNe%2FVIRinHUUBKn%2B1dV0gRHMP2kvlffkM7bol4suHlF96D7KhjM%2FHoLRNqfFOkQhtju6IRQKqlTyzCEtUzkCLtJSNzBaBizflpU2WwiQvCQX9G1i4%2ByPQNlFBrifSykPBTWoi74NNpSPukmawC%2FtIxc3q8nqRrC%2Bef1g1hjSUIO%2FkjHLc7catlBkrPkYVlIEKAT2Zr4zjfWMFE0DL4BNjmsZXvggoK%2F8DCwH2jKshrCPqqPYeAhSWtBOGrHbAFrhDjNJ5ezb4cYj%2FU8REzUfdHbaP13YeiW%2FU2UY4yXmDbBRm1BUQNYA97Ll1aJ07OOuUbXnxQq%2FggM3KSz3rBJck1tgguwV8LAsKQ%2FAoSLuhb5aODy5jZ5Pgs4KvGYP7Ze9UpWv4L0A%2FFUDDup%2BEvnsp0YgIKAHuUYsw9Lpfc84YHeC8EDWVpSGmWwtPFjoLENUbfLjR5xPrNYY9I0lIAIuuBRfSJ4YfOXVaEd0ntT006F22hO6HM9W0sh4FKGC34XO4rXT%2FHFs4EsEedCQmUvtjz4sBHxwnhPWpzSMCeKlSGt8W8wC008tqis0IfFVRYkJeW%2BMPYlBYE1jXiqIm%2FJ0XAK52XYS8tWAxGZMxq7harfs8b3HGDt%2BCT45gCyqY50s%2BPkLvbcGWsmunTm0yWacCWEk5hIpnXHaPnjmi7iODV780WkyI8T%2Fe0C%2B60baD64HrB8WLA5msKi2zKj3pjkkHhRvBKL0XytpjGF6QRqfyhDUOUtvczyuyVqxwYXELKa41c2EEI6W7EpdHYHgjkg67%2FyHAyhNVwEtdIXCkzUNX1TWVlN%2BKKakE3EIq4KnsRNfrrkEaMHon6IbrO8W4aX1JlUQ6v0ha1CPDak7MflUFTTHJ5TBAxthrjDOy206UhJE0B54teUkzvgOu737u6fR0J8EH8zhJ6hbSxXDI3xv%2BPhTvtEIE6P0VDqRUtw8kHOJordyJOxuq1W%2BFmEyg6FLbjFZ9%2BxNHhLeBa%2BBobrY6BRcG%2FSAVT07GS3kPaqbw1xmvJxdvibd6BrMr9dxaZWwc4yRh0SczUbWCXnokhAViHeMWO0O3WDA7g%2FjUOzWc%2BS1hsgL0ZwZ%2Fn8QCQDup253eLoRE6UBN%2Boh98hLIoOdVol1yXzfRUNx8Ben%2FoqdUrqR0B%2FNHwkYNhmy4ZvAZdWhZwUuZEYkPsKxfgEHFwi5aQLpsAHDpoG0bsrQnk7H1tuaQ%2FEoELSRFLWNMa1HObAoDvm2ONr6uh%2Be9URqmAWuEQma6yDG9vvbG8fRPNsBwpat9XM52kiHFrYwfLM21%2FOM3TX7tw6rsR7pIGn53s%2Bk6%2Bg%2BqEf56x00y8xUcggFCfpHoJZA6653u5w3%2BJ%2FNHbXRuQouFfX3%2BYoWMIDWdOtjonKjAZ55t5nchQeYd6oKkTiV8blFCqmR6jLA2c0Ug0vi2rXhfbdDw8FRL2o4sQBQvEMI5nPgUkVQZx5DAGQuP9hhYQzguobDbvmEw7qKTmG2YvD0xNC99eG95E6VWSd6AWOnxi1Sd0CCWnOKf0z7QILjXcSdnHA5BIao%2F%2F5xY%2FsJ3XJJ1LFy001bVBBgY15m4pvGBj95MiqaIu6NUk2%2BRuFGi9idHWUqlGFcCOXujk0yYhqZp9C%2BqGi2tkqwxuOnu1h7r75z0xxzZYZ4TjOk9dy8d7rgVRoJ0GMS59RysWxsMsIcIcYsT%2FygQ0dzowj8%2F6UWkcKdSI4yIfrNGMu3r1dGBZ3lDkmn%2F58ZgMKmwXNOyQ0pDcg39O0r1qJMfcnqwfWeljapr7WlMbAYj3K1zulbpRGYcs0V5Fx%2FI5Pgm9g%2BqTmDJz28tnKIQaynrJpdGUAFq7RIQP6E1ja%2Feykw0sWwQYxIl4wajqLTF6imLOQVqQIH8Lsadp70azWC14So0D2ZSSyt17ucr%2FYmHuSQtGwv4Jh%2BxOyYZrTD%2BfH0enXfPNx2%2FEfpb%2BKPCZg2lwA9Bc683ud3nMA3wb1dlSHdgVCBNIrHPbCmEcWgc7x99zI1yw%2FD1R%2BbNkhl0OlrBs2V0uQL19iVysc69%2BM5XoBxFAfrEuO%2Bn%2FFPn0cq6diIo3l0ItOfRcW7hCArSUr8zFOjxQ4veTxAe6Vh9rB8kA%2BhejHj94HTUI8yPTuKHDdLCpWTr4IjKR6kX9DHHvnB%2FN8hOHr%2FQ1n8i9EwWQMjUfqWxctnvDYdJqSPPopTzSTuEH5v6P35vJLq%2FzMyAeiU30MCpAaEfY9bUf3JyX8Xj10xLs%2BZcrYPkrLa9E7NVh6gGGgPw7tTqTiwlM%2BOZ8oTkY9kMXI13daTOKK4YPZvzJaj%2B4cRde6SO8pZHcSobqBrPX2Mmuu3G8SzDtk2wtXe2NahSQMRwSEq%2BoiHRrA7wHdMYbT9e5t5kR8bCP4PV3Phpm3UKbkB47LpxaM2SxhhTiYaw13vDVuJUb5DOdu6kfRmer%2Fr%2BM4G0HBgG4lX9b%2B0mUgYL0hZVUFehm1UNsa5x%2BirTswQTevYGod%2BAZIzVo%2BuVlj%2FXDX1HUx60eYWM1zA74Riacuqh4JQOCKydpktWvzFq8Tvq9cYffNRpjCfcMDasVeP9pefXO0EJdgLQ3QCyVmK6l4csvN52FMpQRMgF4jA8xZqplBXQB7XzTkZNiqBempqtkiOUqWjHZ%2FdQ1XTdvY1jk4zRiJrHnGAGwXG5%2FiKmn7L9fn7oqqQg6lfBR9DejxIXjxg4USErXG5d22A23Ya1oeLg%2B9cgWk9faZ9s3mXB1xRhBT%2Fo4SgxFR00uy20RN1rWFBZ154eaEg%2FNVRcjXFxbIoAxRv14VXa2iqHCLve4YXh4QQ6yKQQuSlO9lk7QlI7gnyjZ%2Fvrxj69pJRrptL36HXyC%2Fcyu%2F8c%2FlkEbXMGbyt50wKO8jP5QPY3%2BHlvB8oRjJfC8zdhtDLpzZAitTUBgpY4Ot8WHXAz8NdHRnjEO394Jp1%2FsU0HXt%2F%2F7iz26cxtcP1kRg4IryOzkCRRYE%2BPuvcXcNkM0gN6tTLkKg7qZMYdLUqULYlYugAUurBTdu1sHW%2Fo%2BdOFO4d4TNU%2BjbduLvm2xkOEFaDeb4v8qfM7KaaVONg8Unz2M2jqsCj%2B6Nf1N5T%2FzNKEGouJiekUk6nSdly8z5GxCsvLDPZJnwfAmkNAmaOTQJjYQtgSPIl0KPw7q40z1XKHFmuPaunKtHheRXdpF5%2B9XjkrW%2Fc57Lhv%2Bh2gIMp5kmyRHjJE37XKre6VilpAKOBLsW7NjMbkja54ox6%2Fo8oEfGT6pDfxx0TD2evCstkr%2B%2FjPIqa7JDVK8h5R78yuXC9vr5DNIjufKNfBckCqhmaxtxwo9rW87mVjrrnoYgwJcSWAhbA2ICEUiyo1QuULcSTunDyFgakLPS%2BqOdsz3y5mTknEbifBRrLnY7VAzCE6S2%2BTDD3IqgflIB07vaD8Rdt7FPyoOpF2TvtRk9X9w0WZVnaecweBHrcv3uwgdmUkO5rlb%2FKzamWKJeL057ZybjHadPOHag3q2qDKwaiiK6GQZXL1kY%3D"));C.port.onmessage=e=>{isNaN(e.data)?A(r.buffer,76928,32).set(A(e.data)):y(e.data)},C.port.postMessage([p,n]);let b=await m(p);for(let e in b.exports)w.env[e]=b.exports[e];let k=await m(n),M=a(d.data.buffer);await I;let x=Date.now();const R=1e3/60;let W=x;C.connect(g.destination);let L=!1,Y=x,j=e=>{let t=Date.now();e?(L=!1,g.resume(),x+=t-Y,C.port.postMessage(x)):(L=!0,g.suspend(),Y=t,C.port.postMessage(0))};window.addEventListener("focus",(()=>j(!0)),{signal:Q.signal}),window.addEventListener("blur",(()=>j(!1)),{signal:Q.signal}),j(document.hasFocus()),function e(){if(f)try{let t=!1;if(!L){let e=navigator.getGamepads(),s=0;for(let A=0;A<4;++A){let a=e[A];if(a){for(let e=0;e<8;++e){let t=(e+12)%16;a.buttons.length>t&&a.buttons[t].pressed&&(s|=1<<8*A+e)}if(a.axes.length>1)for(let e=0;e<4;++e){let t=a.axes[1-(e>>1)];(1&e?t:-t)>.5&&(s|=1<<8*A+e)}a.buttons.length>9&&a.buttons[9].pressed&&(t=!0)}}let B=a(r.buffer);B[16]=Date.now()-x,B[17]=F|s,k.exports.upd&&k.exports.upd(),b.exports.endFrame();let o=new ArrayBuffer(32);A(o).set(A(r.buffer,80,32)),C.port.postMessage(o,[o]);let n=a(r.buffer,77824,1024);for(let e=0;e<76800;++e)M[e]=4278190080|n[i[e+120]];l.putImageData(d,0,0)}let s=Date.now();W=Math.max(W+R,s),t?c(o):window.setTimeout(e,Math.round(W-s))}catch(e){B.setMessage(D,e.toString())}}()}catch(e){B.setMessage(D,e.toString())}}function f(e,t){let A=document.createElement("a");A.href=URL.createObjectURL(e),A.download="microw8_"+(new Date).toISOString()+t,A.click(),URL.revokeObjectURL(A.href)}return{runModule:c,runModuleFromURL:async function(e,t){let A=await fetch(e),a=A.headers.get("Content-Type");return!(a&&a.includes("html")||200!=A.status)&&(c(await A.arrayBuffer(),t||u),!0)},setDevkitMode:e=>u=e}}(document.getElementById("screen"),{setMessage:(e,t)=>{let A=document.getElementById("message");t&&(A.innerText=t),A.hidden=!t}});new EventSource("events").onmessage=e=>{console.log(e.data),"L"==e.data&&s.runModuleFromURL("cart",!0)},s.runModuleFromURL("cart",!0);</script></html>